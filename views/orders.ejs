<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('parts/header.ejs') %>
    <title>Your Orders</title>
  </head>
  <body>
    <%- include('parts/navbar.ejs') %>

    <div class="container my-5">
      <h2 class="mb-4">Your Orders</h2>

      <% if ( orders.length > 0) { %>
        <% orders.forEach(order => { %>
          <div class="card mb-4 ">
            <div class="card-header ">
              <strong>Name:</strong> <%= order.name %> <br>
              <strong>Email:</strong> <%= order.email %> <br>
              <strong>Status:</strong> <%= order.status %> <br>
              <strong>Order Date:</strong> <%= order.createdAt.toLocaleString() %> <br>
              <strong>City:</strong> <%= order.city   %><br>
              <strong>Delivery Address:</strong> <%= order.address %> <br>
              <strong>Phone:</strong> <%= order.phone %> <br>
             

            </div>
            <div class="card-body">
              <h5 class="card-title">Items:</h5>
              <ul class="list-group">
                <% order.items.forEach(item => { %>
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                      <strong><%= item.name %></strong> <br>
                      Quantity: <%= item.amount %> <br>
                      Price: $<%= item.price %>
                    </div>
                    <img src="/<%= item.image %>" alt="<%= item.name %>" style="height: 50px; width: 50px; object-fit: cover;">
                  </li>
                <% }) %>
              </ul>
              <div class="mt-3 justify-content-between" >
                <strong>Total Price:</strong> $<%= order.totalPrice.toFixed(2) %>
                <form  method="post">

                  <button type="submit" formaction="/orders/delete" class="btn btn-danger">delete</button>
                </form>
              </div>
            </div>

          </div>
        <% }) %>
      <% } else { %>
        <div class="alert alert-info">
          You have no orders yet.
        </div>
      <% } %>
      
    </div>

    <%- include('parts/footer.ejs') %>
  </body>
</html>